import i18n from 'i18next';
import { initReactI18next } from 'react-i18next';
import Backend from 'i18next-http-backend';
import LanguageDetector from 'i18next-browser-languagedetector';

// 从localStorage读取语言设置
const savedLanguage = localStorage.getItem('language');

i18n
  .use(Backend)
  .use(LanguageDetector)
  .use(initReactI18next)
  .init({
    lng: savedLanguage || 'en',
    fallbackLng: 'zh',
    debug: false,
    interpolation: {
      escapeValue: false, // React already escapes values by default
    },
    resources: {
      zh: {
        translation: {
          "balance": "当前余额",
          "availablePoints": "可用积分",
          "settlementInfo": "结算信息",
          "timeUntilSettlement": "下一次结算",
          "appList": "应用列表",
          "bettingApps": "已投注应用",
          "appsWithBets": "已投注 dApp",
          "dailyReturn": "日化预期收益率",
          "bettingAmount": "我的投注",
          "betTime": "投注时间",
          "eligibleForRewards": "可获得奖励",
          "notEligibleYet": "尚未满足时间要求",
          "totalBet": "总投注积分",
          "supporters": "投注人数",
          "viewMore": "查看更多信息",
          "bet": "下注",
          "redeem": "赎回",
          "bettingInstructions": "投注说明",
          "initialPoints": "每个用户初始获得 50 积分",
          "minimumBet": "每次投注金额必须 ≥1 积分",
          "maximumBet": "每个 dApp 最多投注 100 积分",
          "settlementFrequency": "每分钟自动结算一次",
          "rewardDistribution": "前10名 dApp 的支持者分享奖池",
          "redeemFee": "赎回投注将扣除1%手续费（向上取整，最低1积分）",
          "noSupporters": "暂无支持者",
          "newAppBonus": "新应用奖励",
          "growthBonus": "成长奖励",
          "supporterBonus": "支持者奖励",
          "rewardMechanism": "奖励机制",
          "newAppBonusDesc": "新加入7天内的应用获得20%额外奖励",
          "growthBonusDesc": "排名5-10的应用获得成长奖励，排名越低奖励越高",
          "supporterBonusDesc": "每增加1个支持者，奖励增加10%，最高100%",
          "rewardDistributionDesc": "前10名应用按权重分配奖励：15%, 14%, 13%, 12%, 11%, 10%, 9%, 8%, 7%, 6%",
          "poolGrowth": "奖池每分钟自动增长",
          "estimatedAfterSettlement": "结算后计算",
          "settledAfterHourly": "每分钟结算后发放",
          "decentralized": "去中心化设计",
          "transparentRewards": "透明的奖励分配",
          "fairCompetition": "公平竞争环境",
          "showCalculation": "查看收益率计算依据",
          "hideCalculation": "隐藏计算依据",
          "calculationBasis": "计算依据",
          "totalBetsAcrossApps": "所有应用总投注",
          "hourlyDistribution": "每分钟分配",
          "hourlyDistributionDesc": "每分钟分配总投注的 1% 作为奖励",
          "rankWeightDesc": "排名越靠前，权重越高",
          "rankWeight": "排名权重",
          "baseReward": "基础奖励",
          "bonuses": "额外奖励",
          "totalBonus": "总奖励系数",
          "totalReward": "总奖励",
          "userShare": "用户份额",
          "estimatedHourlyEarnings": "预计每小时收益",
          "estimatedDailyEarnings": "预计每日收益",
          "calculationNote": "注：收益率为估算值，实际收益可能因投注变化而有所不同。",
          "howRewardsWork": "奖励如何计算",
          "rewardPoolSource": "奖励池来源：用户投注和赎回手续费",
          "rewardCalculation": "奖励计算因素",
          "tipsForMaximizingRewards": "最大化奖励的技巧",
          "diversifyBets": "分散投注：不要把所有积分都投在一个应用上",
          "discoverNewApps": "发现新应用：新应用有额外奖励",
          "checkSupporterCount": "关注支持者数量：支持者越多，奖励越高",
          "betEarly": "尽早投注：投注时间越长，获得的结算次数越多",
          "rewardNote": "注：奖励机制旨在鼓励用户发现和支持优质应用，同时保持系统的可持续性。",
          "howReturnRateCalculated": "收益率如何计算",
          "calculationSteps": "计算步骤",
          "step1CalculatePool": "第一步：计算奖励池",
          "step1Desc": "计算所有应用的总投注",
          "step2DetermineDistribution": "第二步：确定每分钟分配金额",
          "step2Desc": "每分钟分配总投注的 1% 作为奖励",
          "step3ApplyRankWeight": "第三步：应用排名权重",
          "step3Desc": "根据应用排名分配基础权重",
          "step4AddBonuses": "第四步：添加额外奖励",
          "step4Desc": "添加支持者、成长和新应用奖励",
          "step5CalculateUserShare": "第五步：计算用户份额",
          "step5Desc": "根据用户投注占比计算个人奖励",
          "step6ConvertToDailyRate": "第六步：转换为每日收益率",
          "step6Desc": "将每小时收益率转换为每日收益率",
          "welcome": "欢迎来到 Linera Edge",
          "welcomeMessage": "预测 dApp 排名，赢取丰厚奖励！基于 Linera 区块链的去中心化预测平台。",
          "connectWallet": "请先连接钱包",
          "connectWalletMessage": "连接钱包后开始投注和参与排名预测",
          "startBetting": "开始投注",
          "dappRanking": "dApp 排名",
          "viewAll": "查看全部 →",
          "noData": "暂无排名数据",
          "howToParticipate": "如何参与",
          "participateStep1": "1. 连接钱包",
          "participateStep1Desc": "连接您的 Linera 钱包获取初始100积分",
          "participateStep2": "2. 选择 dApp 投注",
          "participateStep2Desc": "为您看好的 dApp 投注积分，支持其排名上升",
          "participateStep3": "3. 赢取奖励",
          "participateStep3Desc": "每小时结算一次，前10名 dApp 的支持者分享奖池",
          "betSuccess": "投注成功！",
          "redeemSuccess": "赎回成功！",
          "betError": "投注失败，请稍后重试",
          "redeemError": "赎回失败，请稍后重试",
          "insufficientBalance": "余额不足，请检查您的余额",
          "invalidAmount": "请输入有效的投注金额",
          "betRange": "投注金额必须在 1 到 {{balance}} 积分之间",
          "redeemRange": "赎回金额不能超过投注总额 {{amount}} 积分",
          "processing": "处理中...",
          "settlementComplete": "结算完成",
          "settlementInProgress": "结算中...",
          "reloadBalance": "余额加载中，请稍后重试",
          "rewardCalculating": "奖励计算中...",
          "noBettingApps": "暂无投注记录",
          "startBettingMessage": "从应用列表选择应用开始投注",
          "hasBet": "已下注",
          "ranking": "热度排名 #{{rank}}",
          "noBets": "暂无投注",
          "loading": "加载中...",
          "loadingApps": "加载dApp列表...",
          "loadingRankings": "加载排名数据...",
          "allAppsLoaded": "已加载全部应用",
          "hourlySettlement": "每分钟自动结算一次",
          "top10Share": "前10名 dApp 的支持者分享80%奖池",
          "rewardWeights": "奖励权重：第1名25%，第2名18%，第3名14%，...，第10名3%",
          "redeemFeeInfo": "赎回收取1%手续费（向上取整，最低1积分）",
          "settlementRules": "结算规则",
          "betConfirm": "投注确认",
          "redeemConfirm": "赎回确认",
          "betAmount": "投注金额",
          "redeemAmount": "赎回金额",
          "confirmBet": "确认投注",
          "confirmRedeem": "确认赎回",
          "currentBalance": "当前余额",
          "copy": "复制",
          "betTotal": "投注总额",
          "feeInfo": "将扣除 1% 手续费（向上取整，最低1积分）",
          "placeholderBet": "输入投注积分 (1-100)",
          "placeholderRedeem": "输入赎回积分",
          "betRangeInfo": "投注金额必须为 1-100 积分",
          "redeemRangeInfo": "赎回金额不能超过投注总额",
          "platformTotalBet": "平台总投注额",
          "activeUsers": "活跃用户",
          "settledApps": "已结算 dApp",
          "platformPool": "平台奖池",
          "home": "首页",
          "betting": "投注",
          "rankings": "排名",
          "communityLeaderboard": "排行榜",
          "profile": "个人中心",

          "disconnect": "断开连接",
          "walletAddress": "钱包地址",
          "bettingStats": "投注统计",
          "betCount": "投注次数",
          "maxBet": "最大投注",
          "avgBet": "平均投注",
          "bettingHistory": "投注历史",
          "unknown": "未知",
          "whitelistCheckError": "白名单查询出错",
          "whitelistCheckResult": "白名单检查结果",
          "passed": "通过",
          "failed": "失败",
          "pleaseFillAppIdAndName": "请填写应用ID和名称",
          "connectWalletToManageApps": "连接钱包后即可管理应用",
          "loadingAppData": "加载应用数据中...",
          "fetchingAppList": "正在从合约状态获取应用列表",
          "appDataFetchFailed": "获取应用数据失败",
          "reload": "重新加载",
          "checkingPermissions": "检查权限中...",
          "verifyingWhitelist": "正在验证您的白名单权限",
          "insufficientPermissions": "权限不足",
          "onlyWhitelistCanManageApps": "只有白名单地址可以管理应用",
          "currentAddress": "当前地址",

          "systemStatus": "系统状态",
          "queriesWorking": "查询：正常工作，可以读取应用列表",
          "appAddDemoVersion": "应用添加：当前为演示版本，需要通过合约操作实现",
          "dataSource": "数据来源：合约初始化时自动添加的测试数据",
          "refreshAppData": "刷新应用数据",
          "debugInfo": "调试信息",
          "totalApps": "应用总数",
          "filteredApps": "过滤后",
          "searchApps": "搜索应用...",
          "whitelistPermission": "白名单权限",
          "addApp": "添加应用",
          "addNewApp": "添加新应用",
          "appId": "应用ID",
          "enterAppId": "输入应用ID",
          "appName": "应用名称",
          "enterAppName": "输入应用名称",
          "appDescription": "应用描述",
          "enterAppDescription": "输入应用描述",
          "confirmAdd": "确认添加",
          "cancel": "取消",
          "noMatchingApps": "没有找到匹配的应用",
          "noAppData": "暂无应用数据",
          "appListFetched": "应用列表已从合约状态获取，当前数据库中没有应用",
          "pleaseAddFirstApp": "请使用上方\"添加应用\"按钮添加第一个应用",
          "active": "活跃",
          "disabled": "已禁用",
          "id": "ID",
          "addedAt": "添加时间",
          "removeApp": "移除应用",
          "remove": "移除",
          "appAddedSuccess": "应用添加成功！",
          "appAddFailed": "应用添加失败，请检查是否在白名单中",
          "appAddError": "添加应用失败",
          "confirmRemoveApp": "确定要移除这个应用吗？此操作不可撤销。",
          "appRemovedSuccess": "应用移除成功！",
          "appRemoveFailed": "移除应用失败，请检查权限",
          "pleaseWait": "请稍候",
          "injectPool": "增加奖池",
          "injectPoolAmount": "增加金额",
          "enterInjectAmount": "输入增加金额",
          "injectPoolSuccess": "奖池增加成功！",
          "injectPoolFailed": "奖池增加失败，请检查权限",
          "currentPoolBalance": "当前奖池余额",
          "connectWalletToViewRankings": "连接钱包后查看完整排名",
          "rank": "排名",
          "dappName": "dApp 名称",
          "change": "变化",
          "points": "积分",
          "hours": "小时",
          "minutes": "分钟",
          "seconds": "秒",
          "discordLeaderboard": "Discord 社区排行榜",
          "dailyLeaderboard": "每日排行榜",
          "weeklyLeaderboard": "每周排行榜",
          "monthlyLeaderboard": "每月排行榜",
          "user": "用户",
          "earnings": "收益",
          "leaderboardDescription": "排行榜说明",
          "dailyLeaderboardDesc": "每日排行榜：记录用户当天的收益，每天自动重置",
          "weeklyLeaderboardDesc": "每周排行榜：记录用户当周的收益，每周自动重置",
          "monthlyLeaderboardDesc": "每月排行榜：记录用户当月的收益，每月自动重置",
          "leaderboardForRewards": "排行榜数据用于 Discord 社区奖励发放",
          "earningsCalculation": "收益计算基于投注结算后的奖励分配"
        }
      },
      en: {
        translation: {
          "balance": "Balance",
          "availablePoints": "Available Points",
          "settlementInfo": "Settlement Info",
          "timeUntilSettlement": "Time Until Next Settlement",
          "appList": "App List",
          "bettingApps": "My Supported Apps",
          "appsWithBets": "Apps with Bets",
          "dailyReturn": "Est. Daily Yield",
          "bettingAmount": "My Allocation",
          "betTime": "Allocation Time",
          "eligibleForRewards": "Eligible for Rewards",
          "notEligibleYet": "Not Eligible Yet",
          "totalBet": "Total Points Allocated",
          "supporters": "Supporters",
          "viewMore": "View Details",
          "bet": "Support",
          "redeem": "Withdraw",
          "bettingInstructions": "How It Works",
          "initialPoints": "New users start with 50 points",
          "minimumBet": "Minimum allocation: 1 point",
          "maximumBet": "Max allocation per app: 100 points",
          "settlementFrequency": "Settles automatically every minute",
          "rewardDistribution": "Supporters of top 10 apps share the reward pool",
          "redeemFee": "1% fee on withdrawals (rounded up, min 1 point)",
          "noSupporters": "No supporters yet",
          "newAppBonus": "New App Bonus",
          "growthBonus": "Growth Bonus",
          "supporterBonus": "Supporter Bonus",
          "rewardMechanism": "Reward Mechanism",
          "newAppBonusDesc": "Apps added within 7 days receive +20% extra reward",
          "growthBonusDesc": "Apps ranked 5–10 receive growth bonus (higher for lower ranks)",
          "supporterBonusDesc": "Each additional supporter adds 10% to rewards, up to 100%",
          "rewardDistributionDesc": "Top 10 apps receive rewards by weight: 15%, 14%, 13%, 12%, 11%, 10%, 9%, 8%, 7%, 6%",
          "poolGrowth": "Reward pool grows automatically every minute",
          "estimatedAfterSettlement": "Calculated after settlement",
          "settledAfterHourly": "Distributed after each minute settlement",
          "decentralized": "Decentralized Design",
          "transparentRewards": "Transparent Reward Distribution",
          "fairCompetition": "Fair Competition Environment",
          "showCalculation": "View Return Rate Details",
          "hideCalculation": "Hide Details",
          "calculationBasis": "Calculation Basis",
          "totalBetsAcrossApps": "Total Allocations Across Apps",
          "hourlyDistribution": "Minute Distribution",
          "hourlyDistributionDesc": "1% of total allocations distributed every minute as rewards",
          "rankWeightDesc": "Higher rank = higher weight",
          "rankWeight": "Rank Weight",
          "baseReward": "Base Reward",
          "bonuses": "Bonuses",
          "totalBonus": "Total Bonus Factor",
          "totalReward": "Total Reward",
          "userShare": "Your Share",
          "estimatedHourlyEarnings": "Est. Hourly Earnings",
          "estimatedDailyEarnings": "Est. Daily Earnings",
          "calculationNote": "Note: Return rates are estimates and may vary based on allocation changes.",
          "howRewardsWork": "How Rewards Are Calculated",
          "rewardPoolSource": "Reward Pool Source: User allocations & withdrawal fees",
          "rewardCalculation": "Reward Factors",
          "tipsForMaximizingRewards": "Tips to Maximize Rewards",
          "diversifyBets": "Diversify: Don't allocate all points to one app",
          "discoverNewApps": "Discover new apps: They get extra bonuses",
          "checkSupporterCount": "Check supporter count: More supporters = higher rewards",
          "betEarly": "Allocate early: Longer duration = more settlements",
          "rewardNote": "Note: The mechanism encourages discovery of quality apps while ensuring long-term sustainability.",
          "howReturnRateCalculated": "How Return Rates Are Calculated",
          "calculationSteps": "Calculation Steps",
          "step1CalculatePool": "Step 1: Calculate Reward Pool",
          "step1Desc": "Sum of allocations across all apps",
          "step2DetermineDistribution": "Step 2: Determine Minute Distribution",
          "step2Desc": "1% of total allocations distributed as rewards each minute",
          "step3ApplyRankWeight": "Step 3: Apply Rank Weights",
          "step3Desc": "Base rewards allocated according to app ranking",
          "step4AddBonuses": "Step 4: Add Bonuses",
          "step4Desc": "Include supporter, growth, and new app bonuses",
          "step5CalculateUserShare": "Step 5: Calculate Your Share",
          "step5Desc": "Personal reward based on your allocation percentage",
          "step6ConvertToDailyRate": "Step 6: Convert to Daily Rate",
          "step6Desc": "Hourly rate converted to estimated daily yield",
          "welcome": "Welcome to Linera Edge",
          "welcomeMessage": "Predict dApp rankings and earn rewards! A decentralized prediction platform on Linera.",
          "connectWallet": "Connect Wallet to Start",
          "connectWalletMessage": "Connect your Linera wallet to claim your starting points and begin.",
          "startBetting": "Start Allocating",
          "dappRanking": "dApp Rankings",
          "viewAll": "View All →",
          "noData": "No rankings yet",
          "howToParticipate": "How It Works",
          "participateStep1": "1. Connect Wallet",
          "participateStep1Desc": "Connect your Linera wallet and claim your starting points",
          "participateStep2": "2. Choose & Support dApps",
          "participateStep2Desc": "Allocate points to dApps you believe will rise in ranking",
          "participateStep3": "3. Earn Rewards",
          "participateStep3Desc": "Hourly settlements — supporters of top 10 dApps share the pool",
          "betSuccess": "Allocation Successful!",
          "redeemSuccess": "Withdrawal Successful!",
          "betError": "Failed to allocate — please try again",
          "redeemError": "Withdrawal failed — please try again",
          "insufficientBalance": "Not enough points — check your balance",
          "invalidAmount": "Please enter a valid amount",
          "betRange": "Allocation must be between 1 and {{balance}} points",
          "redeemRange": "Withdrawal cannot exceed your total allocation of {{amount}} points",
          "processing": "Processing...",
          "settlementComplete": "Settlement Complete",
          "settlementInProgress": "Settling...",
          "reloadBalance": "Loading balance — please wait",
          "rewardCalculating": "Calculating rewards...",
          "noBettingApps": "No active allocations",
          "startBettingMessage": "Browse the app list and start allocating points",
          "hasBet": "Active Allocation",
          "ranking": "#{{rank}} Rank",
          "noBets": "No allocations yet",
          "loading": "Loading...",
          "loadingApps": "Loading apps...",
          "loadingRankings": "Loading rankings...",
          "allAppsLoaded": "All apps loaded",
          "hourlySettlement": "Settles automatically every minute",
          "top10Share": "Top 10 dApps' supporters share 80% of the pool",
          "rewardWeights": "Reward weights: 1st 15%, 2nd 14%, 3rd 13%... 10th 6%",
          "redeemFeeInfo": "1% fee deducted on withdrawal (rounded up, min 1 point)",
          "settlementRules": "Settlement Rules",
          "betConfirm": "Confirm Allocation",
          "redeemConfirm": "Confirm Withdrawal",
          "betAmount": "Allocation Amount",
          "redeemAmount": "Withdrawal Amount",
          "confirmBet": "Allocate Points",
          "confirmRedeem": "Withdraw",
          "currentBalance": "Current Balance",
          "copy": "Copy",
          "betTotal": "Your Total Allocation",
          "feeInfo": "1% fee will be deducted (rounded up, min 1 point)",
          "placeholderBet": "Enter points to allocate (1–100)",
          "placeholderRedeem": "Enter amount to withdraw",
          "betRangeInfo": "Allocations must be 1–100 points per app",
          "redeemRangeInfo": "Cannot exceed your total allocation",
          "platformTotalBet": "Total Platform Allocations",
          "activeUsers": "Active Users",
          "settledApps": "Settled Apps",
          "platformPool": "Reward Pool",
          "home": "Home",
          "betting": "Allocate",
          "rankings": "Rankings",
          "communityLeaderboard": "Leaderboard",
          "profile": "Profile",

          "disconnect": "Disconnect",
          "walletAddress": "Wallet Address",
          "bettingStats": "Allocation Stats",
          "betCount": "Allocation Count",
          "maxBet": "Largest Allocation",
          "avgBet": "Average Allocation",
          "bettingHistory": "Allocation History",
          "unknown": "Unknown",
          "whitelistCheckError": "Failed to check whitelist",
          "whitelistCheckResult": "Whitelist Status",
          "passed": "Passed",
          "failed": "Failed",
          "pleaseFillAppIdAndName": "Please enter App ID and Name",
          "connectWalletToManageApps": "Connect wallet to manage apps",
          "loadingAppData": "Loading app data...",
          "fetchingAppList": "Fetching app list from contract...",
          "appDataFetchFailed": "Failed to load app data",
          "reload": "Reload",
          "checkingPermissions": "Checking permissions...",
          "verifyingWhitelist": "Verifying whitelist access...",
          "insufficientPermissions": "Insufficient permissions",
          "onlyWhitelistCanManageApps": "Only whitelisted addresses can manage apps",
          "currentAddress": "Current Address",

          "systemStatus": "System Status",
          "queriesWorking": "Queries: Operational — can read app list",
          "appAddDemoVersion": "App addition: Demo mode — requires on-chain transaction",
          "dataSource": "Data source: Test apps added during contract initialization",
          "refreshAppData": "Refresh Data",
          "debugInfo": "Debug Information",
          "totalApps": "Total Apps",
          "filteredApps": "Filtered",
          "searchApps": "Search apps...",
          "whitelistPermission": "Whitelist Permission",
          "addApp": "Add App",
          "addNewApp": "Add New App",
          "appId": "App ID",
          "enterAppId": "Enter App ID",
          "appName": "App Name",
          "enterAppName": "Enter App Name",
          "appDescription": "Description",
          "enterAppDescription": "Enter description (optional)",
          "confirmAdd": "Add App",
          "cancel": "Cancel",
          "noMatchingApps": "No matching apps found",
          "noAppData": "No apps available",
          "appListFetched": "App list loaded from contract — no apps in current database",
          "pleaseAddFirstApp": "Use the \"Add App\" button above to add your first app",
          "active": "Active",
          "disabled": "Disabled",
          "id": "ID",
          "addedAt": "Added",
          "removeApp": "Remove App",
          "remove": "Remove",
          "appAddedSuccess": "App added successfully!",
          "appAddFailed": "Failed to add app — check whitelist status",
          "appAddError": "Error adding app",
          "confirmRemoveApp": "Are you sure you want to remove this app? This action cannot be undone.",
          "appRemovedSuccess": "App removed successfully!",
          "appRemoveFailed": "Failed to remove app — check permissions",
          "pleaseWait": "Please wait...",
          "injectPool": "Inject Pool",
          "injectPoolAmount": "Inject Amount",
          "enterInjectAmount": "Enter amount to inject",
          "injectPoolSuccess": "Pool injected successfully!",
          "injectPoolFailed": "Failed to inject pool — check permissions",
          "currentPoolBalance": "Current Pool Balance",
          "connectWalletToViewRankings": "Connect wallet to view full rankings",
          "rank": "Rank",
          "dappName": "dApp Name",
          "change": "Change",
          "points": "Points",
          "hours": "h",
          "minutes": "m",
          "seconds": "s",
          "discordLeaderboard": "Discord Leaderboard",
          "dailyLeaderboard": "Daily Leaderboard",
          "weeklyLeaderboard": "Weekly Leaderboard",
          "monthlyLeaderboard": "Monthly Leaderboard",
          "user": "User",
          "earnings": "Earnings",
          "leaderboardDescription": "Leaderboard Info",
          "dailyLeaderboardDesc": "Daily: Tracks today's earnings — resets every 24 hours",
          "weeklyLeaderboardDesc": "Weekly: Tracks this week's earnings — resets every Monday",
          "monthlyLeaderboardDesc": "Monthly: Tracks this month's earnings — resets on the 1st",
          "leaderboardForRewards": "Leaderboard rankings determine Discord community rewards",
          "earningsCalculation": "Earnings calculated from post-settlement reward distribution"
        }
      }
    }
  });

export default i18n;